class BrazilMapComponent extends HTMLElement {
    constructor() {
        super();
        this.shadow = this.attachShadow({ mode: "open" })
    }
    connectedCallback() {
        this.render();
        let states = this.shadow.querySelectorAll(".thp-brazil-state");
        states.forEach((item) => item.addEventListener("mouseover", this.handleMouseover.bind(this)))
        states.forEach((item) => item.addEventListener("mouseleave", this.handleMouseleave.bind(this)))
        states.forEach((item) => item.addEventListener("click", this.handleMouseClick.bind(this)))
    }
    handleMouseClick(state) {
        const statesWithThpProjects = ['SE', 'BA', 'AM', 'MA', 'CE', 'PB', 'AL', 'RJ', 'MG', 'ES', 'SP']
        if (window.innerWidth <= 900 && statesWithThpProjects.find((s) => s === state.target.id)) {
            const messageBox = this.shadow.querySelector('message-box-component');

            let states = this.shadow.querySelectorAll(".thp-brazil-state");

            messageBox.clearMessage()
            this.erase();

            states.forEach((item) => item.classList.contains('active') ? item.classList.remove('active') : null)

            this.shadow.querySelector(`#${state.target.id}`).classList.add('active')
            this.handleMouseover(state)
        }
    }
    handleMouseover(state) {
        const statesWithThpProjects = ['SE', 'BA', 'AM', 'MA', 'CE', 'PB', 'AL', 'RJ', 'MG', 'ES', 'SP']
        if (statesWithThpProjects.find((s) => s === state.target.id)) {
            const messageBox = this.shadowRoot.querySelector('message-box-component');

            messageBox.createMessage(state.target.id)
            this.draw(this.position(state.target.id), state.target.id)

            this.shadowRoot.querySelector(".vertical-line").addEventListener('animationend', () => {
                messageBox.showMessage()
            });
        }
    }
    handleMouseleave() {

        const messageBox = this.shadowRoot.querySelector('message-box-component');

        messageBox.clearMessage()
        this.erase();
    }
    position(stateId) {
        const brazilMapState = this.shadowRoot.querySelector(`.thp-brazil-map #${stateId}`);
        let bbox = brazilMapState.getBBox();

        let centerX = bbox.x + bbox.width / 2;
        let centerY = bbox.y + bbox.height / 2;


        const coordinatesbrazilMapState = {
            x: centerX,
            y: centerY
        }
        return coordinatesbrazilMapState;
    }
    draw(stateXY, stateId) {
        const horizontalLine = this.shadow.querySelector('.horizontal-line');
        const verticalLine = this.shadow.querySelector('.vertical-line');
        const circle = this.shadow.querySelector('.circle');
        const messageBoxContainer = this.shadow.querySelector('.message-box-container');

        const state = this.data().states.find((item) => item.id == stateId)
        let messageX = state.messageX
        let messageY = state.messageY

        if (window.innerWidth <= 1400) {
            messageX = "80"
        }
        if ((stateId == "SE" || stateId == "MA") && window.innerWidth <= 1525) {
            messageX = "80"
        }
        if(window.innerWidth <= 600){
           const brazilMapState = this.shadowRoot.querySelector(`.thp-brazil-map #RS`);
            let bbox = brazilMapState.getBBox();

            messageX = "50"
             messageY = bbox.y + bbox.height
        }
        

        messageBoxContainer.setAttribute('x', messageX)
        messageBoxContainer.setAttribute('y', messageY)



        let dH = `M ${stateXY.x}, ${stateXY.y} H  ${messageX}  `;
        let dV = `M ${messageX}, ${stateXY.y} V ${messageY}  `;


        horizontalLine.setAttribute('d', dH);
        horizontalLine.style.setProperty('--horizontalLineLength', horizontalLine.getTotalLength())
        horizontalLine.classList.remove('hide')

        verticalLine.setAttribute('d', dV);
        verticalLine.style.setProperty('--verticalLineLength', verticalLine.getTotalLength())

        horizontalLine.addEventListener('animationend', () => {
            verticalLine.classList.remove('hide')
        });

        verticalLine.addEventListener('animationend', () => {
            circle.setAttribute('cx', messageX)
            circle.setAttribute('cy', messageY)
            circle.classList.remove('hide')
        });
    }
    erase() {
        const horizontalLine = this.shadow.querySelector('.horizontal-line');
        const verticalLine = this.shadow.querySelector('.vertical-line');
        const circle = this.shadow.querySelector('.circle');

        horizontalLine.setAttribute('d', '');
        horizontalLine.classList.add('hide');

        verticalLine.setAttribute('d', '');
        verticalLine.classList.add('hide');

        circle.setAttribute('cx', '')
        circle.setAttribute('cy', '')
        circle.classList.add('hide')

    }
    data() {
        return {
            states: [
                { id: "RS", messageX: "", messageY: "", d: "M493.48 673.678L500.988 675.399L507.043 673.678L512.856 675.399H520.366L526.179 679.386H532.718L543.862 687.124L549.191 695.569L565.42 696.506L565.945 699.4L561.422 702.33L561.502 706.513L559.203 709.25L566.065 711.36L559.604 720.274L555.971 731.533L547.736 742.945L536.513 754.048L528.44 757.018L519.718 764.524L516.973 773.906L511.483 782.036L501.794 789.541H497.759L499.049 783.6L497.759 778.753L500.826 775.783L506.8 772.341L504.055 769.371L499.697 768.746L496.579 766.401L494.366 759.52L482.096 753.736L480.319 749.357L474.829 748.42L472.084 745.603L468.852 745.759L466.591 742.008L462.072 737.63L457.066 742.321L453.512 741.696L454.966 736.849L440.916 724.652L436.072 724.028L432.52 726.373L429.238 728.247L427.084 726.894L431.338 723.712L431.499 721.367L432.735 719.909L435.373 719.597L441.024 714.541L444.471 708.702L447.861 708.13L449.878 703.074L455.046 697.602L458.195 695.805L460.7 696.506L461.588 694.396L459.65 692.443L467.802 687.047L469.984 687.672L473.94 685.014L474.908 682.28L481.369 679.775L486.375 679.074L487.181 676.728L490.087 676.416L490.814 674.07L493.48 673.678Z" },
                { id: "PR", messageX: "", messageY: "", d: "M484.411 619.005L488.231 617.076L490.653 607.85L494.366 606.285L496.579 599.095L505.832 593.777L512.454 592.683L521.334 594.092L523.111 591.903L533.123 594.873L537.484 594.248L544.909 596.278L546.847 599.252L561.704 599.095L567.032 603.159L568.326 615.667L574.461 624.112L572.845 629.741H585.605L587.056 632.086L585.279 635.84H592.546L595.506 640.372L590.231 644.647L585.712 652.152L574.138 653.04L569.777 656.947H567.032L563.32 653.508L555.408 654.914L551.37 653.196L546.847 656.947H542.003L537.645 659.605L538.935 663.515L535.062 665.077L533.929 662.891L526.662 663.515L522.466 661.013L511.483 659.136L506.155 660.073L502.12 656.947L497.032 657.728L494.097 652.464L491.836 645.795L488.607 643.71L481.716 646.42L479.351 643.085L483.01 638.29L482.365 632.763L484.948 624.737L484.411 619.005Z" },
                { id: "SC", messageX: "", messageY: "", d: "M493.48 673.678L496.225 668.987L495.014 665.705L497.032 657.728L502.12 656.947L506.155 660.073L511.483 659.136L522.466 661.013L526.662 663.515L533.929 662.891L535.061 665.077L538.935 663.515L537.645 659.605L542.003 656.947H546.847L551.369 653.196L555.408 654.914L563.32 653.508L567.032 656.947H569.777L574.138 653.04L585.712 652.152L585.279 655.594L587.432 656.531L587.54 657.991L584.311 663.411L583.989 666.017L585.279 667.474L584.634 671.02L585.605 676.492L583.505 679.15L583.182 682.904L585.766 686.343L582.373 698.071L574.138 703.074L566.065 711.36L559.203 709.25L561.502 706.513L561.422 702.33L565.945 699.4L565.42 696.506L549.191 695.569L543.862 687.124L532.718 679.386H526.179L520.366 675.399H512.856L507.043 673.678L500.988 675.399L493.48 673.678Z" },
                { id: "SP", messageX: "800", messageY: "620", d: "M505.832 593.777V591.275L516.973 586.428L523.918 577.829V574.859L525.856 573.451L528.44 569.856L527.795 566.726L532.962 557.188L537.427 553.437H541.68L543.619 548.121L552.337 542.962L555.247 545.307L558.637 544.367L561.543 546.088L569.455 545.307L571.232 547.181H574.138L573.17 549.371L574.138 552.5L576.722 549.527L578.822 549.683V554.218L580.921 554.686L582.695 549.683L592.331 548.538L594.269 549.683L597.821 549.214V546.869L605.303 546.348L609.395 550.571L608.642 554.374L611.333 555.783L612.301 558.284L609.771 561.567L613.971 572.253L618.275 570.793L623.173 574.284L620.052 577.725L620.697 583.458L618.547 587.003L624.896 592.527V598.26H631.895L636.847 596.487L635.338 593.985L637.277 591.903L642.122 593.777L648.686 590.546L653.424 589.193L655.147 592.944L658.268 593.673L660.744 591.903L663.328 593.048L664.191 595.133L661.174 597.895L654.986 599.876L652.08 604.203L653.155 605.817L651.918 606.861L648.851 606.077L644.866 609.415L641.394 610.82L641.799 613.478L640.183 614.574L636.227 613.322L630.978 612.933L628.154 614.966L627.347 618.093L625.488 617.701L624.843 616.451L614.508 622.156L612.813 625.518L597.659 634.744L597.767 637.975L595.506 640.372L592.546 635.84H585.279L587.056 632.086L585.605 629.741H572.845L574.461 624.113L568.326 615.667L567.032 603.159L561.704 599.095L546.847 599.252L544.909 596.278L537.484 594.248L533.123 594.873L523.111 591.903L521.334 594.092L512.454 592.684L505.832 593.777Z" },
                { id: "RJ", messageX: "780", messageY: "600", d: "M653.424 589.193L669.681 583.353L680.983 582.208L682.169 584.918L697.563 577.413L695.41 574.599L698.746 570.428L700.039 563.34L703.806 560.63L707.36 561.254L708.005 567.091L714.788 569.072L720.035 569.151L720.601 571.497L718.744 573.215L720.117 576.733L719.873 581.896L716.806 585.099L711.316 585.803L702.594 592.604L702.031 595.185L704.049 596.278L701.949 598.78L692.342 598.079L682.975 599.797L677.324 598.78L676.679 600.424H674.579L671.025 598.051L663.866 600.424L661.174 597.895L664.191 595.133L663.328 593.048L660.744 591.902L658.268 593.672L655.147 592.944L653.424 589.193Z" },
                { id: "ES", messageX: "800", messageY: "580", d: "M703.805 560.63L705.987 555.703L704.896 552.889L705.987 550.623H713.011L714.383 546.165L716.806 544.836V542.022L720.6 538.035L721.568 533.111L716.723 527.011L717.21 525.526L720.6 525.839L721.568 523.729L719.551 523.025L719.794 519.506H717.128L718.298 514.815L720.923 513.878L724.275 514.739L724.999 513.682L723.304 511.885L724.152 510.789L726.172 511.416L727.946 510.048L732.994 510.712L742.964 516.848L741.592 524.433L743.448 534.204L741.19 540.929L737.231 542.49L733.923 546.4L734.647 551.012L731.903 556.643L727.545 561.959L724.8 562.351L723.99 565.633L720.034 569.152L714.788 569.072L708.005 567.091L707.36 561.255L703.805 560.63Z" },
                { id: "MG", messageX: "800", messageY: "540", d: "M732.994 510.712L734.812 508.091L727.706 500.794L728.459 492.248H732.981L734.271 490.787L732.336 489.33L733.304 486.411L739.331 481.512L739.872 477.237L731.473 472.859L720.816 470.253L717.694 472.13L714.14 471.818L714.681 467.335L706.712 460.454L701.978 461.915L699.394 459.621L697.025 461.079L684.645 452.533H680.553L675.816 455.347L668.818 452.533L670.434 446.902L663.005 445L654.287 448.362L648.149 453.886L645.135 453.99L636.202 460.871L630.601 463.06L628.666 461.704L632.002 458.994L631.357 456.18L627.05 457.12L626.405 454.407L623.173 453.157L621.775 455.139L622.85 459.517L621.775 460.246L616.393 458.473L614.992 461.811L616.5 463.997L614.992 466.603V468.896L617.576 469.836V474.319L608.427 476.821V480.676L605.733 484.014V485.68L609.18 487.765L611.036 494.333L604.496 500.041L605.546 502.855L608.209 503.011L609.18 505.277L606.757 508.719L608.209 512.549L597.795 519.975L590.851 517.709H579.388L575.672 519.038L571.554 523.181L569.455 520.759L565.201 523.181L560.306 522.268L559.335 523.989L555.623 523.573L552.068 527.951L551.746 530.974L548.41 531.807L543.78 538.323L542.271 541.917L543.619 548.121L552.337 542.962L555.246 545.307L558.636 544.367L561.543 546.088L569.455 545.307L571.232 547.181H574.138L573.17 549.371L574.138 552.5L576.722 549.527L578.821 549.683V554.218L580.921 554.686L582.695 549.683L592.331 548.538L594.269 549.683L597.821 549.214V546.869L605.303 546.348L609.395 550.571L608.642 554.374L611.333 555.783L612.301 558.284L609.771 561.567L613.971 572.253L618.274 570.793L623.173 574.284L620.052 577.725L620.697 583.457L618.546 587.003L624.896 592.527V598.26H631.895L636.847 596.487L635.338 593.985L637.277 591.903L642.121 593.777L648.686 590.546L653.424 589.193L669.681 583.353L680.983 582.208L682.169 584.918L697.563 577.413L695.41 574.599L698.746 570.428L700.039 563.34L703.806 560.63L705.987 555.703L704.896 552.889L705.987 550.623H713.011L714.383 546.165L716.806 544.836V542.022L720.601 538.035L721.568 533.111L716.724 527.011L717.211 525.526L720.601 525.839L721.568 523.729L719.551 523.025L719.794 519.506H717.128L718.298 514.815L720.923 513.878L724.275 514.739L724.999 513.682L723.304 511.885L724.152 510.789L726.173 511.416L727.947 510.048L732.994 510.712Z" },
                { id: "MS", messageX: "", messageY: "", d: "M543.78 538.323L539.501 533.031H531.991L519.639 526.935L516.733 523.416L510.677 524.589L508.255 521.631L512.372 518.725L511.161 516.536L506.316 517.317L505.105 512.782L500.988 511.064L496.225 512.237L490.331 509.735L492.43 506.061L495.254 505.513L496.579 498.32L493.721 497.772L488.231 505.121H484.357L479.753 502.071L476.04 505.513L467.078 504.496L460.187 499.232L453.189 496.939L446.517 499.336L441.024 499.545L435.749 507.466L431.012 508.195L424.662 501.317L422.67 502.306L424.447 508.406L427.837 515.911L423.963 528.264L417.341 542.649L422.025 547.025L417.341 549.527V551.716L421.702 558.284L422.992 570.793L419.817 582.104L420.893 583.978L425.522 583.145L427.084 585.543L440.379 586.584L447.054 583.145L451.899 586.688L457.926 587.107L460.187 589.193L460.295 591.694L462.018 593.464L461.048 597.739L462.986 602.742L463.309 609.31L465.247 612.853L464.495 616.92L470.522 617.128L478.595 614.73L484.411 619.005L488.231 617.076L490.653 607.85L494.366 606.285L496.579 599.095L505.832 593.777V591.275L516.973 586.428L523.917 577.829V574.859L525.856 573.451L528.44 569.856L527.794 566.726L532.962 557.188L537.427 553.437H541.68L543.619 548.121L542.272 541.917L543.78 538.323Z" },
                { id: "GO", messageX: "", messageY: "", d: "M505.105 512.782L506.8 510.436L503.087 504.028L507.448 490.423L515.844 484.951L512.615 481.824L520.366 474.319H526.179L530.862 468.376L531.507 460.715L535.545 457.744L537.806 459.621L542.272 457.744V448.206L546.364 441.95L545.396 436.322L550.241 427.568L549.27 423.657L551.853 420.219L554.114 413.651H559.282L556.214 420.687L562.188 422.561L571.716 428.661V423.814L575.106 419.591L578.983 422.405L580.921 419.279L586.572 423.814V429.129L592.223 425.222L593.356 429.598L595.939 427.88L598.523 428.349L601.751 432.571L603.367 430.226L601.751 425.534L603.367 424.282L607.564 428.036L618.221 423.033H626.62V429.598L628.233 433.352L626.781 442.422L633.239 447.113L631.357 456.18L627.05 457.12L626.405 454.407L623.173 453.157L621.775 455.139L622.85 459.517L621.775 460.246L616.393 458.473L614.992 461.811L616.501 463.997L614.992 466.603V468.896L617.576 469.836V474.319L608.427 476.821V480.676L605.733 484.014V485.68L609.18 487.765L611.036 494.333L604.496 500.041L605.546 502.855L608.209 503.011L609.18 505.277L606.757 508.719L608.209 512.549L597.795 519.975L590.851 517.709H579.388L575.672 519.038L571.555 523.181L569.455 520.759L565.202 523.181L560.306 522.268L559.335 523.989L555.623 523.573L552.068 527.951L551.746 530.974L548.41 531.807L543.78 538.323L539.501 533.031H531.991L519.639 526.935L516.733 523.417L510.677 524.589L508.255 521.631L512.372 518.725L511.161 516.536L506.316 517.317L505.105 512.782Z" },
                { id: "MT", messageX: "", messageY: "", d: "M551.853 420.219L548.625 415.917L550.241 411.225L549.592 399.421L547.331 397.232L547.736 392.62L549.592 390.823L550.402 381.441L556.859 367.524L442.048 359.394L440.11 356.421H436.233V353.45L433.004 350.636H429.775V348.291H426.708L425.092 342.038V337.816L421.863 332.656L419.602 325.151L416.212 322.961L414.758 326.088V328.746L412.013 332.187L414.435 336.563L413.629 341.723L412.013 343.131V349.387L355.496 348.759L357.431 350.793L356.947 356.736L354.525 357.205V359.55L357.431 362.676L355.98 365.959L356.786 369.088L355.17 371.59L355.335 374.56L357.593 377.062L356.141 387.694L375.517 387.381L376.81 389.727L383.754 390.039L385.045 394.418L381.386 398.849L381.816 402.6L384.292 404.268L385.26 410.42L387.951 411.878L385.582 414.171L382.353 415.944L382.138 422.405L378.344 424.751L376.892 431.163L370.998 434.917L376.971 441.28L374.065 444.434L378.426 452.116L379.394 460.09L374.065 461.027L379.555 467.127L380.848 480.884L410.074 482.605L412.819 480.728L413.951 484.639L410.074 491.047L412.819 499.024L417.341 503.559L422.67 502.307L424.662 501.318L431.012 508.195L435.749 507.466L441.024 499.545L446.517 499.336L453.189 496.939L460.187 499.232L467.078 504.496L476.04 505.513L479.753 502.071L484.357 505.121H488.231L493.721 497.772L496.579 498.32L495.254 505.513L492.43 506.061L490.331 509.735L496.225 512.237L500.988 511.064L505.105 512.782L506.8 510.436L503.087 504.028L507.448 490.423L515.844 484.951L512.615 481.824L520.366 474.319H526.179L530.862 468.376L531.507 460.715L535.545 457.744L537.806 459.621L542.272 457.744V448.206L546.364 441.95L545.396 436.322L550.241 427.568L549.27 423.657L551.853 420.219Z" },
                { id: "DF", messageX: "", messageY: "", d: "M355.496 348.759L351.78 347.198L349.519 350.012L342.901 345.789L341.768 340.63H337.408L336.601 336.719L332.727 334.374H319.971L316.739 340.63H313.833V345.008L310.281 347.666V351.576L297.363 352.67V356.421L292.68 360.643L290.903 357.205L287.674 357.673L286.864 360.643L284.929 359.862L282.184 360.643L281.536 362.364L277.823 359.706L270.395 359.394L268.618 364.085L262.806 366.431L266.844 368.617L272.817 367.055L279.114 366.431L284.929 367.836L286.381 364.397L287.835 364.241L289.774 366.899L290.58 373.464L287.835 377.531V381.909L290.741 387.069L289.125 390.508L290.741 397.076L293.648 400.202L295.747 406.614L304.466 410.053V413.807L312.381 415.684L315.449 412.554L319.322 413.338L324.651 418.498L328.205 416.152L331.595 422.093L340.639 426.159L345.968 426.315L350.164 432.1L364.053 432.727L370.998 434.917L376.892 431.163L378.344 424.751L382.138 422.405L382.354 415.944L385.582 414.171L387.951 411.878L385.26 410.42L384.292 404.269L381.816 402.6L381.386 398.849L385.045 394.418L383.754 390.039L376.81 389.727L375.517 387.381L356.141 387.694L357.593 377.062L355.335 374.56L355.17 371.59L356.786 369.088L355.98 365.959L357.431 362.676L354.525 359.55V357.205L356.948 356.736L357.431 350.793L355.496 348.759Z" },
                { id: "AC", messageX: "", messageY: "", d: "M262.806 366.431L230.831 353.763L200.312 336.879L158.813 328.277L139.434 319.155L140.62 322.857L136.474 324.107V327.025L139.488 330.154L141.778 331.404L140.162 333.36L142.827 336.487L143.713 341.098L148.074 346.337L151.464 347.666L154.212 351.576L154.13 354.936L149.446 360.019L159.053 360.254L165.353 361.504L168.097 366.899L167.614 370.025L184.004 369.869L196.033 360.41L197.89 361.112L197.567 365.282L195.575 367.003V387.694L197.621 386.913L200.043 389.206L203.759 388.946L209.034 386.392L212.692 387.537L222.22 387.017L228.248 387.902L229.917 390.664L237.023 387.798L240.843 381.753L246.494 382.69L248.433 380.345L253.923 376.125L258.767 375.029L266.844 368.617L262.806 366.431Z" },
                { id: "AM", messageX: "30", messageY: "400", d: "M416.212 322.961L415.51 318.895L411.206 314.62L410.236 310.453L414.758 307.115L448.427 233.521L452.301 231.176L453.136 228.934L450.552 227.997L446.732 231.647L442.425 232.532L440.218 231.436L440.164 227.997L434.298 223.202L429.507 223.827L420.14 217.991L420.624 214.184L418.957 211.787L415.188 214.708L411.475 211.474L411.206 208.608L405.932 204.438V200.895L403.13 198.602V188.907H383.106L376.326 202.46L378.48 205.794L374.603 207.047V209.025H370.403V206.315L364.161 202.04L357.918 204.753L355.765 208.608L355.009 214.864L358.348 219.659L356.195 221.637L353.289 217.782L349.627 218.407L347.151 212.571L339.077 207.255V204.753L343.169 205.586L345.645 201.311L340.156 190.368L340.371 186.405L338.325 182.443L340.693 176.815L337.408 168.397L333.856 165.427L335.956 163.161L336.361 158.234L332.484 156.67L330.384 157.842L328.205 154.796L324.249 154.952L319.806 156.201L316.821 158.314L313.026 157.686L311.41 159.015L311.17 164.41L307.132 167.773L305.032 166.992L299.732 171.655L297.901 170.77L291.924 173.376L291.709 177.023L289.341 176.815L287.943 178.171L287.835 180.777L285.628 182.131L284.768 180.257L286.058 178.171L285.198 175.93L282.453 175.357L275.777 179.993L271.793 180.101L261.945 171.603L257.907 172.54L258.176 164.515L257.746 161.388L255.592 160.816L254.195 159.771L254.356 155.237L252.471 153.363L250.371 155.028L248.594 157.27H246.118L242.836 160.712L238.744 158.418L237.561 160.24L238.045 162.481L217.752 163.005L215.491 161.701L209.087 163.213L209.249 173.741L218.559 174.157L221.196 177.127L221.629 182.314L218.157 182.783L215.33 180.75L211.858 182.627L205.963 183.408L205.561 196.308L208.468 199.75L213.717 202.797L213.796 207.099L216.462 211.006L217.186 216.949L206.934 268.392L202.168 269.329L200.473 266.984L195.145 266.827L191.717 268.113L189.494 270.658L182.793 271.283L178.837 273.08L173.265 273.16L164.869 278.007L156.147 284.027L154.047 289.499V293.722L150.335 297.629L148.855 301.435L151.331 307.323L149.715 309.773L146.433 310.192L140.728 314.36L139.434 319.155L158.813 328.277L200.312 336.878L230.831 353.763L262.806 366.43L268.618 364.085L270.395 359.394L277.823 359.706L281.536 362.364L282.184 360.643L284.929 359.862L286.864 360.643L287.674 357.673L290.903 357.204L292.68 360.643L297.363 356.42V352.669L310.281 351.576V347.666L313.833 345.008V340.629H316.739L319.971 334.374H332.727L336.601 336.719L337.408 340.629H341.768L342.901 345.789L349.519 350.012L351.78 347.197L355.496 348.759L412.013 349.387V343.131L413.629 341.723L414.435 336.563L412.013 332.187L414.758 328.745V326.088L416.212 322.961Z" },
                { id: "RR", messageX: "", messageY: "", d: "M403.13 188.907L403.456 171.135L396.429 168.321L391.021 163.161L388.277 159.407L388.599 154.012L383.995 147.211V140.643L386.74 134.31L386.876 129.751L390.642 126.677L391.183 122.038L387.951 118.336L389.459 115.886L387.306 114.22L381.117 113.228L383.701 107.652L383.593 103.534L380.308 100.459L376.165 101.764L371.32 101.136L373.474 106.243L366.798 110.414L366.637 113.592L361.093 113.228L356.786 115.365L356.356 117.971L351.942 118.207L350.164 120.084L347.906 119.38L345.725 121.254L341.041 119.067L337.569 121.958L334.584 122.426L333.211 127.433L331.355 129.23H329.9L329.012 126.573L326.51 123.915L323.844 123.523L321.906 124.928L319.484 123.523L312.704 124.227L309.633 120.317L302.126 120.396L300.269 117.971L298.654 117.579L298.17 118.911L303.982 126.101L306.648 126.961L309.554 130.48L308.343 133.53L309.07 138.456L311.492 141.659L312.865 144.709L311.976 149.321L317.223 151.433L323.278 150.261L324.249 154.952L328.205 154.796L330.384 157.842L332.484 156.67L336.361 158.234L335.956 163.161L333.856 165.427L337.408 168.397L340.693 176.815L338.325 182.443L340.371 186.405L340.156 190.368L345.645 201.311L343.169 205.586L339.077 204.753V207.255L347.151 212.571L349.627 218.407L353.289 217.782L356.195 221.637L358.348 219.659L355.009 214.864L355.765 208.608L357.918 204.753L364.161 202.04L370.403 206.315V209.025H374.603V207.047L378.48 205.794L376.326 202.46L383.106 188.907H403.13Z" },
                { id: "AP", messageX: "", messageY: "", d: "M474.345 150.337L476.929 161.753L485.002 162.534L489.36 168.008L497.436 169.102L500.02 171.76V176.607L505.51 181.298L504.865 186.457L508.738 195.527L513.261 198.81V202.876L516.489 203.657L515.199 208.504H518.105V212.102L523.756 214.604L529.085 213.976L531.185 211.475V207.255L536.352 200.999L537.968 196.308L543.296 192.242L547.98 191.461L552.337 186.926L553.469 182.471L558.959 180.673L562.51 175.357L563.32 170.354L561.704 162.377L555.73 161.44V157.53L551.853 153.935L547.818 155.497L541.196 136.423V124.071L535.653 114.689L532.532 115.522L531.668 121.465L529.3 122.61L528.762 124.904L526.179 126.677L520.151 136.163L516.005 145.101L516.41 148.384L508.982 154.483H503.331L501.231 151.666L497.759 153.543L494.853 151.902H492.108L489.12 154.248L483.386 154.483L478.542 152.294L477.169 150.025L474.345 150.337Z" },
                { id: "PA", messageX: "", messageY: "", d: "M556.859 367.524L559.927 357.673L564.771 350.168H568.81L574.622 341.41L576.722 331.56L571.716 328.433L571.555 325.307L575.267 321.553L574.945 316.081L577.851 312.954H583.021L585.927 306.074H589.64L593.678 292.785L589.801 288.874L585.766 289.967L582.695 287.622L588.833 284.183L599.329 274.02H603.367L612.731 262.293L613.702 256.04L619.837 249.159V241.967L624.036 237.9V234.149L627.588 230.707L629.365 222.421L629.042 214.604L614.024 207.411L599.329 203.969L596.423 206.315L588.024 202.251L589.479 199.278L587.54 196.933L581.083 197.873L570.426 192.401L567.032 186.77L558.959 187.866L560.575 183.643L558.959 180.673L553.469 182.471L552.337 186.926L547.98 191.461L543.296 192.242L537.968 196.308L536.352 200.999L531.185 207.255V211.474L529.085 213.976L523.756 214.604L518.105 212.102V208.504H515.199L516.489 203.657L513.261 202.876V198.81L508.738 195.527L504.865 186.457L505.51 181.298L500.02 176.607V171.759L497.436 169.102L489.36 168.008L485.002 162.533L476.929 161.753L474.345 150.337L472.163 148.071L466.512 148.696L465.057 150.261L458.679 150.417L454.966 148.852L452.301 153.154L456.178 157.062L455.45 160.424L452.544 161.048L446.327 158.859L440.916 159.955L434.054 157.922L430.019 159.015L427.192 163.317L423.558 162.221L418.957 163.862L418.23 166.912L413.547 165.271L410.719 167.304L410.318 170.822L403.456 171.135L403.13 188.907V198.602L405.932 200.895V204.438L411.206 208.608L411.475 211.474L415.188 214.708L418.957 211.787L420.624 214.184L420.14 217.991L429.507 223.827L434.298 223.202L440.164 227.997L440.217 231.436L442.425 232.532L446.732 231.647L450.552 227.997L453.136 228.934L452.301 231.176L448.427 233.521L414.758 307.115L410.236 310.453L411.206 314.62L415.51 318.895L416.212 322.961L419.602 325.151L421.863 332.656L425.092 337.815V342.038L426.708 348.291H429.776V350.636H433.004L436.233 353.45V356.42H440.11L442.048 359.394L556.859 367.524Z" },
                { id: "TO", messageX: "", messageY: "", d: "M588.833 284.183L593.194 286.997L595.939 285.592H598.845L599.813 288.406L604.819 290.28V295.127L606.757 297.629L607.564 304.822L604.658 317.174L601.106 319.835L601.913 322.181H604.819L606.919 324.211L605.79 326.712L614.024 336.095L617.414 332.968H621.614L623.714 335.314L622.904 340.161L617.414 341.254L615.476 349.231L612.892 353.138L617.737 355.952L618.382 360.175H620.804L622.259 362.364L619.998 365.178L623.714 367.524L624.52 373.464H633.239L636.793 375.966L628.72 381.909L623.552 390.823L620.482 392.541L622.582 396.919L626.62 398.172L624.681 410.053L627.587 413.651L626.62 423.033H618.221L607.564 428.036L603.367 424.282L601.751 425.535L603.367 430.226L601.751 432.571L598.523 428.349L595.939 427.88L593.355 429.598L592.223 425.222L586.572 429.129V423.814L580.921 419.279L578.983 422.405L575.106 419.591L571.716 423.814V428.661L562.188 422.561L556.214 420.687L559.282 413.651H554.114L551.853 420.219L548.625 415.917L550.241 411.225L549.592 399.421L547.331 397.232L547.736 392.62L549.592 390.823L550.402 381.441L556.859 367.524L559.927 357.673L564.771 350.168H568.81L574.622 341.41L576.722 331.56L571.716 328.433L571.554 325.307L575.267 321.553L574.944 316.081L577.851 312.955H583.021L585.927 306.074H589.64L593.678 292.785L589.801 288.874L585.766 289.968L582.695 287.622L588.833 284.183Z" },
                { id: "MA", messageX: "850", messageY: "400", d: "M633.239 373.464L635.661 359.939L631.303 350.324L635.661 345.633L640.022 328.513L656.251 325.227L661.823 319.599L664.485 313.267L672.236 311.39L676.597 314.908L685.802 312.563L687.738 303.649L682.893 300.134L682.653 292.625L688.709 287.233V279.728L685.559 276.914L687.497 272.223L685.559 267.063L690.647 261.901V258.618L693.553 254.163L700.093 255.336L709.295 244.937L705.744 241.654L698.961 240.246L694.764 241.654L678.453 234.305L676.031 235.399L672.802 232.741L667.635 238.996L666.18 236.335L661.5 237.9L658.752 236.023L659.723 229.77L653.585 219.451L649.872 216.95L643.25 223.202L641.315 217.106L636.309 218.043L629.042 214.604L629.365 222.421L627.588 230.707L624.036 234.149V237.9L619.837 241.967V249.159L613.702 256.04L612.731 262.293L603.367 274.02H599.329L588.833 284.183L593.194 286.997L595.939 285.592H598.845L599.813 288.406L604.819 290.28V295.127L606.757 297.629L607.564 304.822L604.658 317.174L601.106 319.835L601.913 322.181H604.819L606.919 324.211L605.79 326.712L614.024 336.095L617.414 332.968H621.614L623.714 335.314L622.904 340.161L617.414 341.254L615.476 349.231L612.892 353.138L617.737 355.952L618.382 360.175H620.804L622.259 362.364L619.998 365.178L623.714 367.524L624.52 373.464H633.239Z" },
                { id: "PI", messageX: "", messageY: "", d: "M636.793 375.966L637.682 373.464L640.385 373.816L641.799 377.178L641.233 381.009L644.664 384.879L650.476 386.833L656.007 381.597L660.125 380.148L664.485 381.986L672.559 371.51V367.132L669.653 362.989L676.436 357.125L679.424 360.175L684.43 359.47L688.225 363.301L693.149 361.739L697.133 358.377L705.314 357.125L707.683 352.149L711.449 351.417L715.756 346.937L721.031 342.246L727.166 337.451L728.351 331.508L725.338 330.258L725.983 327.652L725.123 325.359L728.889 323.898L730.72 313.475L724.908 310.661L722.106 300.238L721.65 285.668L716.161 280.04L718.744 266.359L712.957 252.91L713.817 245.561L709.295 244.937L700.093 255.336L693.553 254.163L690.647 258.618V261.901L685.559 267.063L687.497 272.223L685.559 276.914L688.709 279.728V287.233L682.653 292.625L682.893 300.134L687.738 303.649L685.802 312.563L676.597 314.908L672.236 311.39L664.485 313.267L661.823 319.599L656.251 325.227L640.022 328.513L635.661 345.633L631.303 350.324L635.661 359.939L633.239 373.464L636.793 375.966Z" },
                { id: "CE", messageX: "850", messageY: "400", d: "M728.889 323.898L734.73 325.463L741.997 321.945L749.991 325.463V329.686L753.865 332.733L761.132 328.513L764.038 321.945L759.921 315.885L764.038 306.935L762.583 303.649L766.46 299.662H770.337L774.455 291.22L778.572 280.429L786.484 279.805L785.352 276.054L778.733 274.645L776.956 271.363L773.244 270.266L765.331 259.323L759.193 257.914L749.665 249.94L739.17 243.844L731.258 242.279L722.862 244.312L713.817 245.562L712.957 252.911L718.744 266.359L716.161 280.04L721.65 285.669L722.106 300.238L724.908 310.661L730.72 313.475L728.889 323.898Z" },
                { id: "RN", messageX: "", messageY: "", d: "M817.81 308.34H807.637L803.036 303.885L798.918 305.762L800.857 312.327L798.435 317.018H795.285V312.327L790.44 311.858L786.484 314.44L781.722 311.626L783.417 306.23L788.502 301.539L786.484 299.662L778.088 303.18L776.877 306.935L771.549 309.28L764.038 306.935L762.583 303.649L766.46 299.662H770.337L774.455 291.22L778.572 280.429L786.484 279.805L789.229 281.526L793.267 280.589L795.851 282.775L805.053 284.183L808.93 282.306L817.004 284.183L816.842 294.034L817.81 308.34Z" },
                { id: "PB", messageX: "850", messageY: "400", d: "M815.875 328.746L810.059 332.732L803.763 330.154L797.707 332.732V337.892L790.197 340.709L787.534 338.364L788.261 335.546L784.384 334.141L790.197 323.586L786.484 321.945L778.812 328.513L771.549 332.732L767.188 329.918L762.583 331.327L761.132 328.513L764.038 321.945L759.921 315.885L764.038 306.935L771.549 309.28L776.877 306.935L778.088 303.18L786.484 299.662L788.502 301.539L783.417 306.23L781.722 311.626L786.484 314.44L790.44 311.858L795.285 312.327V317.018H798.435L800.857 312.327L798.918 305.762L803.036 303.885L807.637 308.34H817.81L815.875 328.746Z" },
                { id: "PE", messageX: "", messageY: "", d: "M816.842 348.759L806.347 351.417L804.569 355.484L797.947 358.61L791.006 359.238L783.094 352.513H778.572V349.387L775.505 350.168L774.534 354.703L768.721 358.298L767.267 353.294L751.926 347.822V344.852L749.02 343.912L742.724 345.945L739.008 349.699V353.138L733.196 354.026L732.064 358.925L727.222 361.112H723.829L725.768 355.484L722.216 350.324L715.756 346.937L721.031 342.246L727.166 337.451L728.351 331.508L725.338 330.258L725.983 327.653L725.123 325.359L728.889 323.898L734.73 325.463L741.997 321.945L749.991 325.463V329.686L753.865 332.732L761.132 328.513L762.583 331.327L767.188 329.918L771.549 332.732L778.812 328.513L786.484 321.945L790.197 323.586L784.384 334.141L788.261 335.547L787.534 338.364L790.197 340.709L797.707 337.892V332.732L803.763 330.154L810.059 332.732L815.875 328.746L816.842 348.759Z" },
                { id: "AL", messageX: "850", messageY: "400", d: "M816.842 348.759L806.347 351.417L804.569 355.484L797.948 358.61L791.006 359.238L783.094 352.513H778.572V349.387L775.505 350.168L774.534 354.703L768.721 358.298L772.839 362.676L780.511 366.274H784.868L791.813 369.401L792.619 373.464L797.948 374.716L801.771 379.043L803.387 374.873L807.798 372.163L813.073 364.449L816.842 348.759Z" },
                { id: "SE", messageX: "815", messageY: "420", d: "M772.093 360.98L770.721 364.735L772.093 368.486H775.888L777.504 374.429L774.111 375.366L775.565 380.526L772.982 381.778L770.721 379.901L767.169 380.369L766.037 383.808L772.093 389.595V393.659L777.504 396.161L782.94 395.38L787.136 389.752L789.505 384.644L796.073 379.013L801.025 377.347L797.202 373.02L791.873 371.768L791.067 367.705L784.123 364.578H779.765L772.093 360.98Z" },
                { id: "BA", messageX: "800", messageY: "450", d: "M636.793 375.966L628.72 381.909L623.552 390.823L620.482 392.541L622.582 396.92L626.62 398.172L624.681 410.053L627.588 413.651L626.62 423.033V429.598L628.233 433.352L626.781 442.422L633.239 447.113L631.357 456.18L632.002 458.994L628.666 461.704L630.601 463.06L636.202 460.871L645.135 453.99L648.149 453.886L654.287 448.362L663.005 445L670.434 446.902L668.818 452.533L675.816 455.347L680.553 452.533H684.645L697.026 461.079L699.394 459.621L701.978 461.915L706.712 460.454L714.681 467.335L714.14 471.818L717.694 472.13L720.816 470.253L731.473 472.859L739.872 477.238L739.331 481.512L733.304 486.412L732.336 489.33L734.271 490.787L732.981 492.248H728.459L727.706 500.794L734.812 508.091L732.994 510.712L742.964 516.848L747.404 510.048L750.554 509.264L753.138 505.745L751.364 504.028L751.604 497.303L753.381 493.316L752.736 490.891L754.27 482.526L758.387 475.648L758.305 472.675L756.126 469.472L756.233 465.041L754.08 454.826L753.972 451.489L756.556 446.485L757.094 439.501L755.266 438.043L755.051 436.374L757.416 434.81L757.742 431.371L755.803 428.973L756.126 426.784L765.923 422.616L773.028 416.256L778.088 409.272L783.685 397.076L778.249 397.857L772.839 395.355V391.291L766.783 385.504L767.915 382.065L771.466 381.597L773.727 383.474L776.311 382.222L774.856 377.062L778.249 376.125L776.634 370.182H772.839L771.466 366.431L772.839 362.676L768.721 358.298L767.267 353.294L751.926 347.822V344.852L749.02 343.912L742.724 345.945L739.008 349.699V353.138L733.196 354.026L732.064 358.925L727.222 361.112H723.829L725.768 355.484L722.216 350.324L715.756 346.937L711.449 351.417L707.683 352.149L705.314 357.125L697.133 358.377L693.149 361.739L688.225 363.301L684.43 359.47L679.424 360.175L676.436 357.125L669.653 362.989L672.559 367.132V371.511L664.485 381.986L660.125 380.149L656.007 381.597L650.476 386.833L644.664 384.879L641.233 381.009L641.707 376.961L640.385 373.816L637.682 373.464L636.793 375.966Z" },
            ],
            content: []
        }
    }
    style() {
        return `
            <style>
            .thp-brazil-map {
                height:890px;
                width: 100%;
                background-color:#2F431E;
                overflow-x:hidden;
            }
            #AM, #MA, #CE, #PB, #AL, #SE, #BA, #RJ, #MG, #ES, #SP {
                fill: #80B356;
                stroke: #2F431E;
                transition: all 0.3s ease; 
                
            }
            #AM:hover, #MA:hover, #CE:hover,
            #PB:hover, #AL:hover, #SE:hover, #BA:hover,
            #SP:hover, #RJ:hover, #MG:hover, #ES:hover, .active {
                fill: #EC8A41 !important;
            }
            svg path{
                pointer-events:all;
                stroke: #80B357;
                stroke-width: 3; 
                stroke-linecap: round;
                stroke-linejoin: round; 
            }
            #line {
                stroke: white;
                stroke-width: 1.5;
            
            } 
            .horizontal-line{
                stroke-dasharray: var(--horizontalLineLength);
                animation: draw-horizontal-line 0.3s ease;
                stroke-dashoffset: 0;
            }
            .vertical-line{
                stroke-dasharray: var(--verticalLineLength);
                animation: draw-vertical-line 0.3s ease;
                stroke-dashoffset: 0;
            }
            .hide {
                display: none;
            }

            @keyframes draw-vertical-line {
                from {
                    stroke-dashoffset: var(--verticalLineLength);
                }
                to {
                    stroke-dashoffset: 0;
                }
            }
            @keyframes draw-horizontal-line {
                from {
                    stroke-dashoffset: var(--horizontalLineLength);
                }
                to {
                    stroke-dashoffset: 0;
                }
            }
            @media (max-width: 1200px) {
                .message-box-container {
                    width: 355px;
                    height: 155px;
                }
            }
            @media (max-width: 600px) {
                .thp-brazil-map {
                    height: 500px;
                }
                .message-box-container {
                    width: 100%;
                    height: 250px;
                }
            }
            </style>
        `
    }
    createStates() {
        return this.data().states.reduce((acc, current) => acc + `<path id='${current.id}' class='thp-brazil-state' d='${current.d}' />`, '');
    }
    render() {
        this.shadow.innerHTML = `
            ${this.style()}
            <svg class="thp-brazil-map" width="954" height="890" viewBox="0 0 954 890" fill="none" xmlns="http://www.w3.org/2000/svg">              
            ${this.createStates()} 
            <path id="line" class="horizontal-line hide" fill="none"/>
            <path id="line" class="vertical-line hide" fill="none"/>
            <circle class="circle hide" r="3" fill="white" />
            <foreignObject class='message-box-container' x="" y="" width="360" height="180">
                <div xmlns="http://www.w3.org/1999/xhtml">
                    <message-box-component></message-box-component>
                </div>
            </foreignObject>
            </svg>
        `;
    }
}
customElements.define("brazil-map-component", BrazilMapComponent);

class MessageBoxComponent extends HTMLElement {
    constructor() {
        super();
        this.shadow = this.attachShadow({ mode: "open" })
    }
    connectedCallback() {
        this.render();
    }
    data() {
        return {
            messages: {
                ptBr: [
                    { id: "AL", name: 'ALAGOAS', beneficiaries: "100", tagStudents: "", projects: "Projeto: Cultura em Foco (2015)" },
                    { id: "AM", name: 'AMAZONAS', beneficiaries: "1.500", tagStudents: "", projects: "Projeto: Hb" },
                    { id: "BA", name: 'BAHIA', beneficiaries: "30", tagStudents: "", projects: "Projeto: Ed-Mundo" },
                    { id: "CE", name: 'CEARÁ', beneficiaries: "80", tagStudents: "1.078", projects: "Projetos: Ed-Mundo; Synapse; TAG" },
                    { id: "ES", name: 'ESPÍRITO SANTO', beneficiaries: "", tagStudents: "7.879", projects: "Projeto: TAG" },
                    { id: "MA", name: 'MARANHÃO', beneficiaries: "320", tagStudents: "13.417", projects: "Projetos: Synapse; TAG" },
                    { id: "MG", name: 'MINAS GERAIS', beneficiaries: "1.800", tagStudents: "1.202", projects: "Projetos: Synapse; TAG" },
                    { id: "PB", name: 'PARAÍBA', beneficiaries: "", tagStudents: "1.617", projects: "Projeto: TAG" },
                    { id: "RJ", name: 'RIO DE JANEIRO', beneficiaries: "", tagStudents: "25.621", projects: "Projeto: TAG" },
                    { id: "SE", name: 'SERGIPE', beneficiaries: "7.458", tagStudents: "22.704", projects: "Projetos: Synapse; TAG; Cultura em Foco (2015); Hb" },
                    { id: "SP", name: 'SÃO PAULO', beneficiaries: "", tagStudents: "1.997", projects: "Projeto: TAG" },
                ]
            }
        }
    }
    style() {
        return `
            <style>
                .thp-message-box{
                color: white;
                width: fit-content;
                padding-top: 10px;
                font-size: 20px;
                font-family: Futura-LT-W01-Book; 
                }
                .thp-message-box span {
                font-size: 14px;
                font-family: Futura-LT-W01-Book;
                }
                .hide {
                visibility: hidden;
                }
                @media (max-width: 1200px) {
                    .thp-message-box {
                        font-size: 20px;
                    }

                    .thp-message-box span {
                        font-size: 14px;
                    }
                }
                @media (max-width: 600px) {
                    .thp-message-box {
                        font-size: 40px;
                    }

                    .thp-message-box span {
                        font-size: 30px;
                    }
                }
            </style>
        `
    }
    createMessage(id) {
        let element = this.data().messages.ptBr.find((item) => item.id == id)
        const messageBox = this.shadow.querySelector(".thp-message-box")
        if (element != undefined) {
            let message = `<span>${element.name}</span><br/>`
            if (element.beneficiaries != "") {
                message += `<b>${element.beneficiaries} <span>beneficiários diretos</span></b> </br>`
            }
            if (element.tagStudents != "") {
                message += `<b>${element.tagStudents} <span>na base de dados do TAG</span> </b><br>`
            }
            message += `<span>${element.projects}</span>`
            messageBox.innerHTML = message
        }
    }
    clearMessage() {
        const messageBox = this.shadow.querySelector(".thp-message-box")
        messageBox.innerHTML = ''
        messageBox.classList.add('hide')
    }
    showMessage() {
        const messageBox = this.shadow.querySelector(".thp-message-box")
        messageBox.classList.remove('hide')
    }
    position() {
        const messageBox = this.shadowRoot.querySelector('.thp-message-box')

        const coordinatesBMessage = {
            x: messageBox.offsetLeft,
            y: messageBox.offsetTop,
            offsetHeight: messageBox.offsetHeight,
            offsetWidth: messageBox.offsetWidth
        }
        return coordinatesBMessage;
    }
    render() {
        this.shadow.innerHTML = `
            ${this.style()}
            <div class='thp-message-box hide'>
            </div>
        `;
    }
}
customElements.define("message-box-component", MessageBoxComponent);